{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pbuch\\\\Documents\\\\Master\\\\ASE\\\\project thingy\\\\thingy-client-purple\\\\src\\\\components\\\\StudySession.js\";\nimport React, { Component } from \"react\";\nimport moment from 'moment';\nimport axios from \"axios\";\nimport './StudySession.css';\nimport AreaRechartComponent from \"./AreaRechartComponent\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseURL = \"http://localhost:8080\";\n\nclass StudySession extends Component {\n  constructor() {\n    super();\n\n    this.createSessionHandler = e => {\n      e.preventDefault();\n      const new_session = {\n        session_id: this.state.session_numbers,\n        session_name: \"\",\n        session_start: moment().format(\"DD-MM-YYYY hh:mm:ss A\"),\n        session_stopped: 0\n      };\n      let sessions = [new_session, ...this.state.sessions];\n      this.setState({\n        sessions\n      });\n      let new_session_numbers = this.state.session_numbers + 1;\n      this.setState({\n        session_numbers: new_session_numbers,\n        session_ongoing: 1\n      }); // Send creation of session to backend\n\n      let formData = new FormData();\n      formData.append('sessions', this.state.sessions);\n      console.log(\"This data will be sent to the backend\");\n      console.log(formData);\n      axios.post('/session/', formData, {}).then(resp => {\n        if (resp.status !== 200) {\n          throw new Error(`Request failed: ${resp.status}`);\n        }\n      }).catch(err => {\n        console.log(err.response);\n      });\n    };\n\n    this.stopSessionHandler = async e => {\n      e.preventDefault();\n      let sessions = this.state.sessions.map(session => session.session_id === this.state.session_numbers - 1 ? { ...session,\n        session_end: moment().format(\"DD-MM-YYYY hh:mm:ss A\"),\n        session_stopped: 1\n      } : session);\n      await this.setState({\n        sessions\n      });\n      await this.setState({\n        session_ongoing: 0\n      });\n    };\n\n    this.deleteSessionHandler = e => {\n      e.preventDefault();\n      let sessions = [];\n      this.setState({\n        sessions\n      });\n    };\n\n    this.state = {\n      session_numbers: 0,\n      // number of sessions per user\n      session_ongoing: 0,\n      // Boolean: is there a current session ongoing?\n      sessions: [// {\n        //     session_id: integer, // Every session has an unique ID\n        //     session_name: string, // Name of the session\n        //     session_start: date // date and time the session started\n        //     session_end: date // date and time the session stopped\n        //     session_breakTime: date // date and time when the next break is\n        // }\n      ],\n      currentCO2: \"500\",\n      currentTemp: \"20\",\n      avgCO2: \"550\",\n      avgTemp: \"25\"\n    };\n  } //get current co2 and temp measurements\n\n\n  componentDidMount() {\n    axios.get(baseURL + \"/CO2/\").then(async res => {\n      let data = res.data.data;\n      console.log(\"CO2 data:\", data);\n      await this.setState({\n        currentCO2: data\n      });\n    });\n    axios.get(baseURL + \"/temp/\").then(res => {\n      let data = res.data.data;\n      console.log(\"Temperature data:\", data);\n      this.setState({\n        currentTemp: data\n      });\n    }); // Get all sessions from backend\n\n    axios.get(baseURL + \"/session/\").then(res => {\n      let data = res.data.data;\n      console.log(\"Session data:\", data);\n      this.setState({\n        sessions: data\n      });\n    });\n  } // Creates Session and increments number of session and ongoing session will be true\n\n\n  render() {\n    // List of all sessions completed\n    if (this.state.sessions.length > 0) {\n      let sessionsList = this.state.sessions.map(session => {\n        if (session.session_stopped) return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sessionElem\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Session ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 36\n              }, this), \" \", session.session_id, \" | \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Session Start:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 78\n              }, this), \" \", session.session_start, \" | \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Session End:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 74\n              }, this), \" \", session.session_end]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(AreaRechartComponent, {\n              type: \"Temperature\",\n              data: [{\n                \"name\": \"18:10\",\n                \"Temperature\": 24.1\n              }]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(AreaRechartComponent, {\n              type: \"CO2\",\n              data: [{\n                \"name\": \"18:10\",\n                \"CO2\": 500\n              }]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 29\n          }, this)\n        }, session.session_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this);\n      });\n      let currentSession = this.state.sessions.map(session => {\n        if (!session.session_stopped) return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Session ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 32\n            }, this), \" \", session.session_id, \" | \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Session Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 74\n            }, this), \" \", session.session_start]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this)\n        }, session.session_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }, this);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"background\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"backgroundMeasurements\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"elem\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Current measurements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"CO2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [this.state.currentCO2, \" CO2e\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Temperature\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [this.state.currentTemp, \"\\xB0 C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"elem\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Average measurements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Average CO2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [this.state.avgCO2, \" CO2e\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Average Temperature\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [this.state.avgTemp, \"\\xB0 C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"backgroundStudySession\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"elem\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"STUDY SESSION\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Current study sessions: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 33\n              }, this), this.state.session_ongoing != 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.createSessionHandler,\n                children: \"Create New Session\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.stopSessionHandler,\n                children: \"Stop Session\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 39\n              }, this), currentSession, /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this), this.state.sessions.length > 0 && this.state.sessions[this.state.sessions.length - 1].session_stopped != 0 && /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Past study sessions: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), this.state.sessions.length > 0 && this.state.sessions[this.state.sessions.length - 1].session_stopped != 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.deleteSessionHandler,\n                children: \"Delete all Sessions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this), sessionsList]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default StudySession;","map":{"version":3,"sources":["C:/Users/pbuch/Documents/Master/ASE/project thingy/thingy-client-purple/src/components/StudySession.js"],"names":["React","Component","moment","axios","AreaRechartComponent","baseURL","StudySession","constructor","createSessionHandler","e","preventDefault","new_session","session_id","state","session_numbers","session_name","session_start","format","session_stopped","sessions","setState","new_session_numbers","session_ongoing","formData","FormData","append","console","log","post","then","resp","status","Error","catch","err","response","stopSessionHandler","map","session","session_end","deleteSessionHandler","currentCO2","currentTemp","avgCO2","avgTemp","componentDidMount","get","res","data","render","length","sessionsList","currentSession"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\n\r\nimport moment from 'moment';\r\nimport axios from \"axios\";\r\nimport './StudySession.css';\r\nimport AreaRechartComponent from \"./AreaRechartComponent\";\r\n\r\nconst baseURL = \"http://localhost:8080\"\r\n\r\n\r\nclass StudySession extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            session_numbers: 0, // number of sessions per user\r\n            session_ongoing: 0, // Boolean: is there a current session ongoing?\r\n\r\n            sessions: [\r\n                // {\r\n                //     session_id: integer, // Every session has an unique ID\r\n                //     session_name: string, // Name of the session\r\n                //     session_start: date // date and time the session started\r\n                //     session_end: date // date and time the session stopped\r\n                //     session_breakTime: date // date and time when the next break is\r\n                // }\r\n            ],\r\n\r\n            currentCO2: \"500\",\r\n            currentTemp: \"20\",\r\n            avgCO2:\"550\",\r\n            avgTemp:\"25\",\r\n        }\r\n    }\r\n\r\n    //get current co2 and temp measurements\r\n    componentDidMount() {\r\n        axios.get(baseURL+\"/CO2/\").then(async (res) => {\r\n            let data = res.data.data\r\n            console.log(\"CO2 data:\", data)\r\n            await this.setState({\r\n                currentCO2: data\r\n            })\r\n        })\r\n\r\n        axios.get(baseURL+\"/temp/\").then((res) =>{\r\n            let data = res.data.data\r\n            console.log(\"Temperature data:\",data)\r\n            this.setState({currentTemp: data})\r\n        })\r\n\r\n        // Get all sessions from backend\r\n        axios.get(baseURL+\"/session/\").then((res) =>{\r\n            let data = res.data.data\r\n            console.log(\"Session data:\",data)\r\n            this.setState({sessions: data})\r\n        })\r\n    }\r\n\r\n    // Creates Session and increments number of session and ongoing session will be true\r\n    createSessionHandler = (e)=>{\r\n        e.preventDefault()\r\n\r\n        const new_session = {\r\n            session_id: this.state.session_numbers,\r\n            session_name: \"\",\r\n            session_start: moment().format(\"DD-MM-YYYY hh:mm:ss A\"),\r\n            session_stopped: 0,\r\n        }\r\n        let sessions = [new_session, ...this.state.sessions]\r\n        this.setState({sessions})\r\n        let new_session_numbers = this.state.session_numbers + 1\r\n        this.setState({\r\n            session_numbers: new_session_numbers,\r\n            session_ongoing: 1,\r\n        })\r\n\r\n        // Send creation of session to backend\r\n        let formData = new FormData()\r\n        formData.append('sessions',this.state.sessions)\r\n\r\n        console.log(\"This data will be sent to the backend\");\r\n        console.log(formData);\r\n\r\n        axios.post('/session/', formData, {})\r\n             .then(resp => {\r\n                 if (resp.status !== 200) {\r\n                     throw new Error(`Request failed: ${resp.status}`);\r\n                 }\r\n             })\r\n             .catch(err => {\r\n                 console.log(err.response);\r\n             })\r\n    }\r\n\r\n    stopSessionHandler = async (e)=>{\r\n        e.preventDefault()\r\n\r\n        let sessions = this.state.sessions.map(session => (\r\n            session.session_id===this.state.session_numbers-1 ? {...session, session_end: moment().format(\"DD-MM-YYYY hh:mm:ss A\"), session_stopped: 1}: session\r\n        ))\r\n        await this.setState({ sessions });\r\n\r\n        await this.setState({\r\n            session_ongoing: 0,\r\n        })\r\n    }\r\n\r\n\r\n    // Deletes all sessions after clicking the delete button\r\n    deleteSessionHandler = (e)=>{\r\n        e.preventDefault()\r\n        let sessions = []\r\n        this.setState({sessions})\r\n    }\r\n\r\n    render() {\r\n        // List of all sessions completed\r\n        if (this.state.sessions.length > 0) {\r\n            let sessionsList = this.state.sessions.map(session => {\r\n                if (session.session_stopped)\r\n                    return (\r\n                        <div key={session.session_id}>\r\n                            <div className={\"sessionElem\"}>\r\n                                <p><b>Session ID:</b> {session.session_id} | <b>Session\r\n                                    Start:</b> {session.session_start} | <b>Session End:</b> {session.session_end}</p>\r\n                                {/*| <b>Session Duartion:</b> {session.session_end - session.session_start)}</p>*/}\r\n                                <AreaRechartComponent type={\"Temperature\"} data={[\r\n                                    {\r\n                                        \"name\": \"18:10\",\r\n                                        \"Temperature\": 24.1,\r\n                                    }]}></AreaRechartComponent>\r\n                                <AreaRechartComponent type={\"CO2\"} data={[\r\n                                    {\r\n                                        \"name\": \"18:10\",\r\n                                        \"CO2\": 500,\r\n                                    }]}></AreaRechartComponent>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    )\r\n            })\r\n\r\n            let currentSession = this.state.sessions.map(session => {\r\n                if (!session.session_stopped)\r\n                    return (\r\n                        <div key={session.session_id}>\r\n                            <p><b>Session ID:</b> {session.session_id} | <b>Session Start:</b> {session.session_start}\r\n                            </p>\r\n                        </div>\r\n\r\n                    )\r\n            })\r\n\r\n            return (\r\n                <div className={\"back\"}>\r\n                    <div className={\"background\"}>\r\n\r\n                        <div className={\"backgroundMeasurements\"}>\r\n                            <div className={\"elem\"}>\r\n                                <h1>Current measurements</h1>\r\n                                <h2>CO2</h2>\r\n                                <p>{this.state.currentCO2} CO2e</p>\r\n                                <h2>Temperature</h2>\r\n                                <p>{this.state.currentTemp}° C</p>\r\n                            </div>\r\n                            <div className={\"elem\"}>\r\n                                <h1>Average measurements</h1>\r\n                                <h2>Average CO2</h2>\r\n                                <p>{this.state.avgCO2} CO2e</p>\r\n                                <h2>Average Temperature</h2>\r\n                                <p>{this.state.avgTemp}° C</p>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div className={\"backgroundStudySession\"}>\r\n                            <div className={\"elem\"}>\r\n                                <h1>STUDY SESSION</h1>\r\n                                <h2>Current study sessions: </h2>\r\n                                {this.state.session_ongoing != 1 ?\r\n                                    <button onClick={this.createSessionHandler}>Create New Session</button>\r\n                                    : <button onClick={this.stopSessionHandler}>Stop Session</button>}{currentSession}\r\n                                <p></p>\r\n\r\n                                {(this.state.sessions.length > 0) && (this.state.sessions[this.state.sessions.length - 1].session_stopped != 0) &&\r\n                                <h2>Past study sessions: </h2>}\r\n                                {(this.state.sessions.length > 0) && (this.state.sessions[this.state.sessions.length - 1].session_stopped != 0) &&\r\n                                <button onClick={this.deleteSessionHandler}>Delete all Sessions</button>}\r\n\r\n                                {sessionsList}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            )\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default StudySession;"]},"metadata":{},"sourceType":"module"}